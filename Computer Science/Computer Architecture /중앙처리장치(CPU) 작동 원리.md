## CPU의 작동 원리

**cpu의 구성요소**

계산을 담당하는 **ALU(산술논리연산장치),** 해석하는 **제어장치,** 임시저장장치인 **레지스터**

### 🔎 ALU와 제어장치

**✔️ ALU**

- `플래그 레지스터` : 산술 연산 결과의 상태를 보여주는 flag bit들이 모인 레지스터

`ALU`는 레지스터를 통해 `피연산자`를 받아들이고, 제어장치로부터 수행할 연산을 알려주는 `제어 신호`를 받아들인다.

연산을 수행한 결과(특정 숫자, 문자, 메모리 주소)

이는 바로 메모리에 저장되지 않고 일시적으로 `레지스터`에 저장된다.

CPU가 메모리에 접근하는 시간은 레지스터에 접근하는 시간보다 훨씬 느리기 때문에 레지스터에 우선 저장

**✔️ 제어장치**

제어장치는 CPU의 구성 요소 중 가장 정교하게 설계된 부품


▶️ `제어장치`는 제어 신호를 내보내고, 명령어를 해석하는 부품

▶️ `제어 신호`는 컴퓨터 부품들을 관리하고 작동시키기 위한 일종의 전기 신호

**✔️ 제어장치가 받아들이는 정보**

▶️ 제어장치는 클럭 신호를 받아들인다.

`클럭(clock)`이란 컴퓨터의 모든 부품을 움직일 수 있게 하는 시간 단위.

▶️ 제어장치는 ‘해석해야 할 명령어’를 받아들인다.

CPU가 해석해야 할 명령어는 `명령어 레지스터`에 저장된다. 

▶️ 제어장치는 플래그 레지스터 속 플래그 값을 받아들인다.

제어장치는 플래그 값을 받아들이고 이를 참고하여 제어 신호를 발생시킨다.

▶️ 제어장치는 시스템 버스, 그중에서 제어 버스로 전달된 제어 신호를 받아들인다.

제어 신호는 CPU뿐만 아니라 입출력장치를 비롯한 CPU 외부 장치도 발생시킬 수 있다.

**✔️ 제어장치가 내보내는 정보**

▶️ CPU **외부**에 전달하는 제어 신호

`메모리`에 전달하는 제어 신호 : 제어장치가 메모리에 저장된 값을 읽거나 메모리에 새로운 값을 쓰기 위한 제어 신호

▶️ CPU **내부**에 전달하는 제어 신호

`ALU`에 전달하는 제어신호 : 수행할 연산을 지시하기 위한 제어 신호

### 🔎 레지스터

프로그램 속 명령어와 데이터는 실행 전후로 반드시 레지스터에 저장된다.

1. 프로그램 카운터(PC) :  메모리에서 **가져올 명령어**의 주소를 저장
2. 명령어 레지스터(IR) : **방금 메모리에서 읽어 들인 명령어**를 저장하는 레지스터
3. 메모리 주소 레지스터(MAR) :  메모리의 주소를 저장하는 레지스터
4. 메모리 버퍼 레지스터(MBR) : 메모리와 주고받을 값(데이터와 명령어)을 저장하는 레지스터
5. 누산기(AC) : 연산 결과 임시 저장

### 🔎명령어의 구조

**✔️ 연산 코드와 오퍼랜드**

명령어는 `연산 코드`와 `오퍼랜드`로 구성

▶️  오퍼랜드 : 연산에 사용될 데이터가 저장된 위치. `피연산자` 

오퍼랜드 필드에는 메모리 주소나 레지스터 이름이 담긴다

▶️ 연산 코드 : 명령어가 수행할 연산

가장 기본적인 연산 코드 유형은 크게 네 가지이다.

1. 데이터 전송 
2. 산술/논리 연산
3. 제어 흐름 변경
4. 입출력 제어

**✔️ 주소 지정 방식**

주소 지정 방식은 오퍼랜드 필드에 데이터가 저장된 위치를 명시할 때 연산에 사용할 데이터 위치를 찾는 방법이다.


<aside>
💡 **오퍼랜드 필드에 데이터를 직접 넣지 않는 이유는**

메모리 주소를 명시함으로써 표현할 수 있는 정보의 가짓수를 늘린다.

</aside>

▶️ 즉시 주소 지정 방식

 연산에 사용할 데이터를 오퍼랜드 필드에 직접 명시하는 방식.

▶️ 직접 주소 지정 방식

오퍼랜드 필드에 유효 주소를 직접적으로 명시하는 방식

▶️ 간접 주소 지정 방식

유효 주소의 주소를 오퍼랜드 필드에 명시

▶️ 레지스터 주소 지정 방식

직접 주소 지정 방식과 비슷하게 연산에 사용할 데이터를 저장한 레지스터를 오퍼랜드 필드에 직접 명시하는 방법

▶️ 레지스터 간접 주소 지정 방식

연산에 사용할 데이터를 메모리에 저장하고, 그 주소(유효 주소)를 저장한 레지스터를 오퍼랜드 필드에 명시하는 방법

### 🔎 **명령어 사이클과 인터럽트**

**✔️ 명령어 사이클**

 명령어가 실행되는 일정한 주기. 하나의 명령어를 처리하는 정형화된 흐름

▶️ `인출 사이클(fetch cycle)` : 메모리에 있는 명령어를 CPU로 가지고 오는 단계

▶️ `실행 사이클(execution cycle)` : CPU로 가져온 명령어를 실행하는 단계. 제어장치가 명령어 레지스터에 담긴 값을 해석하고, 제어 신호를 발생시키는 단계

▶️ `간접 사이클(indirect cycle)` : 명령어를 실행하기 위해 메모리 접근을 한 번 더 하는 단계


**✔️ 인터럽트**

CPU의 작업을 방해하는 신호

인터럽트의 종류에는 크게 `동기 인터럽트`와 `비동기 인터럽트`가 있다.

▶️ 동기 인터럽트

CPU에 의해 발생하는 인터럽트이다. CPU가 실행하는 프로그래밍상의 오류와 같은 예외적인 상황에 마주쳤을 때 발생하는 인터럽트이다. `예외(exception)`라고 부른다.

▶️ 비동기 인터럽트

주로 입출력장치에 의해 발생하는 인터럽트이다. 세탁기 완료 알림, 전자레인지 조리 완료 알림과 같은 알림 역할을 한다.

## ❓질문

**CPU의 구성 요소와 역할에 대해 설명하시오. 특히 ALU, 레지스터, 제어장치의 기능을 중점적으로 설명해주세요.**

<aside>
💡 **ALU (Arithmetic Logic Unit)**: 산술 연산(덧셈, 뺄셈 등)과 논리 연산(AND, OR 등)을 수행하는 장치.

**레지스터 (Register)**: CPU 내부의 작은 임시 저장 장치로, 데이터 및 명령어 주소 등을 저장.

**제어장치 (Control Unit)**: 명령어를 해석하고 실행하며, 제어 신호를 내보내 다른 컴퓨터 구성 요소를 제어하는 장치.

</aside>

**인터럽트의 개념과 종류에 대해 설명하고, 동기 인터럽트와 비동기 인터럽트의 차이점을 예시와 함께 설명하세요.**

<aside>
💡 **인터럽트**: CPU의 작업을 방해하는 신호로, 예외 상황이나 입출력 장치의 알림 등을 처리하기 위해 사용됨.

**동기 인터럽트**: CPU가 실행 중인 프로그램에서 발생하는 오류나 예외 상황에서 발생하는 인터럽트. 예시: 0으로 나누기 오류.

**비동기 인터럽트**: 주로 입출력 장치에서 발생하는 인터럽트로, 프로그램 실행과 관계없이 발생. 예시: 키보드 입력, 마우스 클릭.

</aside>
