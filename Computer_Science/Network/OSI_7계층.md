---
tags:
  - CS
  - Network
---
# 1 OSI 계층 모델?
## 1.1 OSI 7계층 모델
==OSI 7계층 모델==은 네트워크 통신에서 발생하는 복잡한 작업을 일곱개의 독립적인 계층으로 나누어 설명하는 개념적 모델이다. 이는 네트워크 통신을 계층화 해서 쉽게 이해하고, 각 계층 간의 상호작용을 설명하는데 중점을 준다.

하지만 실제로 배우는 네트워크 모델은 5개 계층 밖에 되지 않는데, 왜 7계층일까?
## 1.2 TCP/IP 모델
그 이유는 오늘날의 네트워크 통신에서 OSI 7계층 모델보다 TCP/IP 모델이 더 널리 사용 되기 때문이다.
![[IMG-20241113190247032.png]]
- TCP/IP 모델은 실제 구현된 인터넷 프로토콜을 바탕으로 한 네트워크 모델이다.
- 5개의 계층으로 되어있고, 대부분의 네트워크 시스템에서 사용되는 모델이다.
### 1.2.1 TCP/IP 를 사용하는 이유
TCP/IP 는 OSI 계층의 세션과 표현 계층을 응용 계층에 통하여, 계층 수가 5개로 줄어들었다.
실제로 네트워크 통신에서 새션관리나 데이터 변환 등의 기능이 주로 응용 계층에서 처리되기 때문이다.
정리하면
- OSI 모델은 이론적으로는 우수하나 실제로 적용하기에는 복잡하고 표준화 속도가 느렸던 반면에 TCP/IP 모델은 실용적이고 빠르게 구현되었기 때문에 인터넷 네트워크의 실제 표준으로 자리 잡게 된 것이다.
## 2. Physical Layer(물리 계층)
컴퓨터가 데이터를 주고 받기 위해서는 데이터를 읽어야 하는데, 이 데이터는 0과 1로 이루어진 데이터의 나열이다. 그렇다면 두 대의 컴퓨터는 0 과 1만 주고 받을 수 있다면 모든 데이터를 주고 받을 수 있을 것이다.
### 2.1 데이터 전송의 기초 0과 1의 전송
두 대의 컴퓨터를 전선으로 직접 연결한다고 가정
- 1을 보낼 때 : +5V의 전기 신호를 보낸다.
- 0을 보낼 때 : -5V의 전기 신호를 보낸다.
이 방식으로 이진 데이터를 주고 받을 수 있다. 이제 0과 1을 이용해 컴퓨터끼리 데이터를 주고 받을 수 있는 환경이 마련된 것 처럼 보인다.
### 2.2 현실적인 문제 : 신호 왜곡
하지만 이 간단한 방식으로는 데이터가 잘 전송되지 않는다.그 이유는 전기 신호가 이상적인 조건에서만 전송되지 않기 때문이다.
![[IMG-20241113190247050.png]]
파동은 왼쪽 처럼 이상적인 sin파로만 전송되지 않는다. 전송되는 환경에 따라 오른쪽과 같이 왜곡되거나 변형된다.

> **왜 이런 문제가 발생할까?**
>컴퓨터의 디지털 신호는 ‘0’과 ‘1’로 빠르게 변화하여, 이를 표현하기 위해 넓은 주파수 대역이 필요하다. 이 신호의 급격한 변화는 다양한 고주파수 성분을 요구하지만, 현실에서는 이를 모두 전달할 수 있는 주파수 대역에 한계가 있다. 따라서 완벽한 신호 전달이 어렵고, 주파수 대역의 한계로 인해 일부 신호 왜곡이 발생할 수 있다.

### 2.3 해결책 : 아날로그 신호로 변환
실제로 통신은 0과 1을 직접 전송하지 않고, 아날로그 신호로 변환하여 데이터를 전송한다. 따라서 sin파나 cos파 같은 아날로그 신호는 전선에서 발생하는 주파수 제한 문제를 완화할 수 있다.
- **인코딩(Encoding)**: 0과 1의 이진 데이터를 아날로그 신호로 변환하여 전송한다.
- **디코딩(Decoding)**: 전송된 아날로그 신호를 다시 0과 1로 변환하여 데이터를 복원한다.
### 2.4 Physical Layer 란?
이러한 과정을 담당하는 것이 바로 네트워크 1계층, ==물리 계층==이다. 물리 계층은 0과 1의 나열을 아날로그 신호로 변환하여 전선이나 기타 물리적인 매체를 통해 전달하고, 다시 아날로그 신호를 0과 1로 변환하여 데이터 통신을 가능하게 하는 모듈이다. 

물리 계층은 컴퓨터가 전기 신호를 통해 데이터를 전송하고 수신하는 기본적인 통신방법을 제공하며, 네트워크의 가장 기초적인 부분을 담당한다.

물리 계층 기술은 ==PHY 칩==이라고 불리는 하드웨어 장치에 의해 구현된다. 이 칩은 전기 신호의 인코딩과 디코딩을 처리하며, 주로 네트워크 장비나 컴퓨터의 네트워크 인터페이스 카드(NIC)에 내장되어 있다. 중요한 점은 물리 계층의 기능이 하드웨어적으로 구현된다는 것이다. <u>즉, 물리 계층은 우리가 프로그래밍 언어로 작성한 함수가 아니라 회로로 구성되어 동작한다.</u>
## 3. Data - Link Layer
컴퓨터가 서로 데이터를 주고 받기 위해서는 단순히 물리적으로 연결되는 것만으로는 충분하지 않다. 여러 대의 컴퓨터가 동시에 하나의 전선을 통해 통신하기 위해서는 추가적인 기술이 필요하다.
### 3.1 여러 대의 컴퓨터와 통신하기
A와 B가 하나의 전선으로 통신하고 있다고 가정하면, A와 통신 하고 싶은 C는 어떻게 연결 될까?
![[IMG-20241113190247059.png]]
가장 쉬운 방법으로는 A 와 C를 연결하는 전선을 추가하면 된다. 하지만 연결해야할 수가 많아지면 전선 또한 계속 늘어나 비효율적인 방법인거 같다.

이러한 비효율성을 해결하기 위해 전선 하나를 여러 대의 컴퓨터가 공유하면서도, 동시에 충돌 없이 통신할 수 있는 방법이 필요하다. 위의 그림처럼 전선 하나에 여러 대의 컴퓨터를 연결한 상황을 생각해 보자. 가운데 전선을 구겨서 상자에 넣으면 오른쪽과 같은 그림이 되는데, 이를 스위치(Switch)라고 한다.
![[IMG-20241113190247070.png]]
위 그림과 같이 서로 다른 네트워크가 스위치와 스위치로 연결되어 서로 다른 네트워크에 속한 컴퓨터끼리 통신이 가능하게 해주는 장비를 라우터 라고 한다.
### 3.2 Framing
어려 대의 컴퓨터가 어떻게 통신할 수 있는지 알겠다.  그러면 여러대의 컴퓨터가 데이터를 전송하면 어떻게 동작할까?
![[IMG-20241113190247082.png]]
A에게 B, C, D가 거의 동시에 각각의 정보를 보내면, A는 000111101010이라는 데이터를 받게 된다.

A는 송신된 데이터의 시작과 끝을 명확히 알지 않으면 데이터가 꼬이게 된다. 이를 위해 프레이밍(Framing)이라는 작업이 필요하다. 송신자는 데이터를 끊어서 전송하기 위해 특정한 비트열을 데이터 앞뒤에 붙인다. 이 비트열은 데이터를 주고받는 컴퓨터들이 데이터의 구분을 명확하게 할 수 있도록 도와준다.
### 3.3. Data-Link Layer란?
Data-Link Layer는 물리적으로 같은 네트워크에 연결된 여러 대의 컴퓨터들이 데이터를 원활하게 주고받을 수 있도록 도와준다. 이 계층에서는 데이터를 전송할 때 어디에서 시작되고 끝나는지 구분해야 하며, 데이터를 여러 부분으로 나눠서 전송하거나, 데이터 전송 중 오류가 발생하지 않도록 관리하는 역할을 한다.
![[IMG-20241113190247091.png]]
Data-Link Layer의 기술은 네트워크 인터페이스 카드(NIC), 흔히 랜카드라고 불리는 장치에 구현된다. 이는 1계층의 물리적인 신호 처리를 담당하는 부분과 함께 하드웨어적으로 구현되어 있다.

> **Data-Link Layer vs Physical Layer**
> 1계층인 Physical Layer는 단순히 전기 신호를 매개체로 하여 데이터를 전송하는 기능을 담당한다. 이 계층에서는 데이터가 어떻게 전송되는지에 대한 규칙은 없고, 그저 신호를 주고 받기만 한다.
> 
> 반면 Data-Link Layer는 단순히 신호를 주고 받는 것을 넘어서, 데이터를 프레임 단위로 나누고 이를 통제하여 ==충돌이나 오류 없이 전송할 수 있도록 관리==한다. 즉, 물리적인 전송이 가능한 환경에서 안정적으로 데이터를 주고 받는 과정을 처리하는 것이다.


## 4. Network Layer
컴퓨터들이 서로 통신을 하기 위해서는 IP 주소를 알아야 한다. IP 주소는 컴퓨터가 가지는 고유한 주소로, 네트워크 상에서 데이터를 주고 받기 위해서는 상대방 컴퓨터의 IP 주소가 필수적이다.
### 4.1 패킷
네트워크 상에서 데이터는 패킷이라는 단위로 전송된다. 패킷은 단순히 데이터를 담는 그릇이 아니라, 상대방의 IP 주소와 데이터를 함께 담은 것을 의미한다. 따라서 A가 B에게 데이터를 보내려면 B의 IP 주소를 알고 있어야 하며, 그 IP 주소에 데이터를 전송하는 것이 패킷을 보내는 과정이다.
![[IMG-20241113190247099.png]]
위 그림에서 A에서 B로 패킷을 보내는 과정을 생각해 보자.

패킷은 여러 라우터를 거쳐 이동해야 한다. 라우터는 네트워크 상에서 중간중간 위치하며, 패킷이 최종 목적지로 갈 수 있도록 경로를 찾아주는 역할을 한다.

예를 들어 A가 B에게 패킷을 보내기 위해 `가` 라우터를 통해야 하고, 그 다음 `마` 라우터를 거친다고 가정해 보자. 인간인 우리는 딱 그림을 보면 `바` 라우터로 가야한다는 것을 알 수 있다. 하지만 라우터는 스스로 패킷이 어디로 가야 할지 알고 있는 것이 아니라, 경로를 찾아주는 과정을 거쳐야 한다. 이 과정이 바로 **라우팅(Routing)**이다.

- **라우팅(Routing)**: 목적지 컴퓨터의 IP 주소를 바탕으로 경로를 찾는 과정. 라우터는 자신과 연결된 네트워크를 분석하고, 목적지까지 최적 경로를 계산하여 패킷을 어느 방향으로 보낼지 결정한다.
- **포워딩(Forwarding)**: 라우팅을 통해 결정된 경로를 바탕으로, 다음 라우터로 패킷을 실제로 전달하는 과정. 라우터는 패킷을 받아 다음 목적지로 넘기는 역할을 수행한다.
### 4.2 Network Layer란?
Network Layer는 네트워크 상에서 IP 주소를 사용하여 경로를 찾고, 그 경로를 따라 데이터를 목적지까지 전달하는 역할을 담당한다. 이는 네트워크의 복잡성과 관계없이 패킷이 목적지까지 도달할 수 있도록 해주는 중요한 계층이다.
## 5. Transport Layer
이제 네트워크 레이어 덕분에 인터넷 상의 모든 컴퓨터가 서로 통신할 수 있게 되었다. 하지만 네트워크를 통해 데이터를 전송받는 컴퓨터는 여러 프로그램(프로세스)이 동시에 실행되고 있을 수 있다.

예를 들어, 한 컴퓨터에서 카카오톡과 크롬이 동시에 실행 중일 수 있다. 이때 컴퓨터는 어떤 데이터를 어떤 프로그램에 보내야 할지 어떻게 알 수 있을까?
### 5.1 포트 번호 
컴퓨터에서 실행 중인 여러 프로그램들이 네트워크 상에서 데이터를 주고 받기 위해서는, 각 프로그램이 고유한 포트 번호를 가져야 한다. 포트 번호는 각 프로세스가 데이터를 구분하여 받을 수 있도록 컴퓨터 내에서 서로 구별되는 정수값이다. 이를 통해 컴퓨터는 어떤 데이터가 어떤 프로세스로 가야하는지 정확히 알 수 있다.
- 데이터를 보낼 때 수신자의 IP 주소뿐만 아니라, 수신자 프로그램의 포트 번호도 함께 붙여서 보내야 한다
### 5.2 Transport Layer란?
Transport Layer는 네트워크 상에서 데이터를 전송할 때 IP 주소와 포트 번호를 사용하여, 데이터를 정확한 프로세스(즉, 실행 중인 프로그램)에 전달하는 역할을 한다.

이 계층에서는 두 가지 주요 프로토콜이 많이 사용된다.
- **TCP(Transmission Control Protocol)**: 데이터 전송의 신뢰성과 순서를 보장하는 프로토콜. 데이터를 보내는 도중 손실되면 재전송하고, 순서가 뒤바뀌지 않도록 관리한다.
- **UDP(User Datagram Protocol)**: 상대적으로 빠르게 데이터를 전송하지만 신뢰성을 보장하지는 않는 프로토콜. 실시간 스트리밍이나 게임 등에서 많이 사용된다.

>전송 계층은 운영체제의 커널에서 소프트웨어적으로 구현되어 있다. 운영체제는 네트워크를 통해 들어온 데이터를 포트 번호를 기준으로 적절한 프로그램에 분배한다. 이를 통해 컴퓨터는 동시에 여러 프로그램이 실행 중이더라도, 각각의 프로그램이 자신에게 할당된 데이터를 문제없이 수신할 수 있게 된다.

## 5.  Session Layer - OSI 7 계층
**역할**: 애플리케이션 간의 **통신 세션을 설정, 유지, 종료**하는 역할을 담당합니다. 세션 계층은 통신 중 연결 상태를 관리하고, 데이터를 동기화하며 연결이 끊어지면 복구합니다.
- **프로토콜**: RPC(Remote Procedure Call), SMB
- **기능**: 세션 관리, 동기화, 연결 복구
- **구현 위치**: 세션 계층은 **소프트웨어 라이브러리**나 **운영체제**에서 구현되며, 주로 애플리케이션 계층과 전송 계층 사이에서 동작합니다.
## 6.  Presentation Layer - OSI 7 계층
**역할**: 데이터를 **특정 형식으로 인코딩/디코딩**하고, **암호화** 및 **압축** 등의 기능을 제공하여 **애플리케이션 간 데이터 형식**을 관리합니다.
- **기능**: 데이터 인코딩/디코딩, 암호화/복호화, 데이터 압축/해제
- **구현 위치**: 표현 계층은 **소프트웨어 라이브러리**나 **애플리케이션**에서 구현되며, 데이터 변환 및 보안 처리를 담당합니다.

## 7. Application Layer
Application Layer는 네트워크 통신의 최종 도착지인 프로세스 간의 데이터 교환을 다룬다. 이 계층에서는 다양한 애플리케이션 프로토콜들이 사용된다. 가장 대표적인 것이 HTTP, FTP, SMTP와 같은 프로토콜이다.
### 7.1 TCP/IP 소켓 프로그래밍
**TCP/IP 소켓 프로그래밍**은 네트워크 프로그램을 작성할 때 Transport Layer에서 제공하는 API를 활용하여 프로그램 간 통신을 가능하게 한다. 이 소켓 프로그래밍을 통해 클라이언트와 서버 프로그램을 만들고, 데이터를 주고 받을 수 있다.

소켓 프로그래밍은 Transport Layer에서 네트워크 연결을 설정하고 데이터 전송을 담당하는 반면, Application Layer는 이 소켓을 이용해 실제로 주고 받을 데이터를 다루는 계층이다.

즉, 소켓 프로그래밍 자체는 Transport Layer에 속하지만, 이 소켓을 통해 주고 받는 데이터의 내용은 Application Layer에서 처리가 된다.